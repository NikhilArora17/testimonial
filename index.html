<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Testimonials</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300&display=swap" rel="stylesheet">
<style>
  :root{
    --muted:#B1B5C0; --emph:#454E59;
    --frame-w:1439px; --frame-h:521px; --left-inset:200px;
    --heading-size:40px;

    --img-w:394px; --img-h:341px;
    --img-to-group-gap:42px;

    --quote-to-text-gap:26px;
    --text-to-meta-gap:86px;
    --meta-to-dots-gap:86px;

    --dot-w:40px; --dot-h:8px;

    --slide-ms:1000ms;     /* slide animation duration */
    --interval-ms:3500ms;  /* total time per slide (progress length) */
  }

  *{box-sizing:border-box}
  html,body{margin:0;background:#fff;color:#000}
  body{font-family:Manrope,system-ui,-apple-system,Segoe UI,Roboto,sans-serif}

  .frame{
    width:var(--frame-w); height:var(--frame-h);
    background:#fff; margin:24px auto; position:relative; overflow:hidden;
  }
  .inner{
    position:absolute; inset:0;
    padding-left:var(--left-inset); padding-right:24px;
    display:flex; flex-direction:column;
  }

  .heading{
    margin:16px 0 48px 0;  /* 48px gap below heading */
    font-size:var(--heading-size); line-height:1.1;
    font-weight:300; letter-spacing:.02em; color:var(--muted);
  }
  .heading em{font-style:normal; color:var(--emph);}

  .viewport{
    flex:1; overflow-x:hidden; overflow-y:hidden;
    width:calc(var(--frame-w) - var(--left-inset) - 24px);
  }
  .track{
    display:flex; height:100%;
    transition:transform var(--slide-ms) cubic-bezier(.25,.1,.25,1);
    will-change:transform;
  }

  .slide{
    flex:0 0 100%; height:100%;
    display:flex; align-items:flex-start; gap:var(--img-to-group-gap);
  }

  .photo{
    width:var(--img-w); height:var(--img-h);
    background:#eee; overflow:hidden; align-self:flex-start;
  }
  /* ↓↓↓ ONLY CHANGE: bias crop upward so faces aren't cut off */
  .photo img{
    width:100%; height:100%;
    object-fit:cover;
    object-position:50% 18%;
    filter:grayscale(100%);
  }

  /* TEXT GROUP pinned to image height so dots/meta can anchor inside */
  .group{
    position:relative;
    width:700px; height:var(--img-h);
  }

  .quoteMark {
    font-weight: 300;
    font-size: 64px;       /* keep the mark big */
    line-height: 1;
    transform: translateX(-5px);
    margin: 0;
    height: 33px;          /* small box height */
    overflow: hidden;      /* crop excess top/bottom */
    display: flex;
    align-items: flex-start;
  }

  .text{
    margin-top:var(--quote-to-text-gap);
    max-width:700px; font-weight:300; font-size:14px; line-height:1.6;
  }

  /* name/designation: 86px above dots */
.meta{
  position:absolute; 
  left:0;
  bottom:calc(var(--meta-to-dots-gap) + var(--dot-h));
  font-size:14px;
  font-weight:300;
  color:#000;        /* same as body */
  line-height:1.3;   /* match body */
}

.meta strong,
.meta .role{
  display:inline;    /* put them on same flow */
  margin:0;
  padding:0;
  line-height:1.3;
  color:#000;        /* exact same */
}






  /* Dots: bottom-left, left-aligned to text block */
  .dots{
    position:absolute; left:0; bottom:0;
    width:700px; display:flex; justify-content:flex-start; align-items:center; gap:10px;
  }
 .dot {
  position: relative;
  width: 10px;
  height: 12px;
  border: 0;
  background: #d3d3d3;
  border-radius: 100%;   /* inactive dots = circles */
  cursor: pointer;
  transition: background 0.3s ease;
  overflow: hidden;
}

/* active dot goes pill-shaped */
.dot.active {
  width: 75px;   /* your original long pill width */
  height: 12px;
  border-radius: 100px;
  background: #d3d3d3;
}

.dot.active::after {
  content: "";
  position: absolute;
  left: 0; top: 0; bottom: 0;
  width: 0%;
  background: #454E59;
  border-radius: 5px;
}

.dot.playing::after {
  animation: dotfill var(--interval-ms) linear forwards;
}
  @keyframes dotfill {
    from { width:0%; }
    to   { width:100%; }
  }
</style>
</head>
<body>
<div class="frame">
  <div class="inner">
    <div class="heading">WHAT OUR CLIENTS<br>ARE <em>SAYING</em></div>
    <div class="viewport" id="viewport">
      <div class="track" id="track"></div>
    </div>
  </div>
</div>

<script>
const track = document.getElementById('track');
const viewport = document.getElementById('viewport');

const TRANSITION_MS = 1000;   // keep synced with --slide-ms if you change it
const AUTOPLAY_MS   = 3500;   // keep synced with --interval-ms if you change it
let idx = 0, timer = null;

const slides = [
  { img: '/1.jpg',
    quote: 'Our Elysium Cinema, brought to life by MCBEE within our residence at DLF Camellias, Gurugram, is nothing short of extraordinary. They created an immersive cinematic environment that marries elegance and cutting-edge AV performance.',
    name: 'KP Singh', role: 'Chairman at DLF' },
  { img: '/2.jpg',
    quote: 'MCBEE transformed our auditorium with flawless sound, crystal-clear visuals, and seamless controls. Every event now feels world-class.',
    name: 'Satya Nadella', role: 'CEO at Microsoft' },
  { img: '/3.jpg',
    quote: 'Working with MCBEE transformed our flagship store into an immersive sensory experience. The lighting, signage screens, and background audio now create a perfect ambiance that reflects our brand story. Shopper engagement has noticeably increased.',
    name: 'Ravi K.', role: 'CEO at INDIA TV' }
];

function build(){
  track.innerHTML = slides.map((s, i) => `
    <section class="slide">
      <div class="photo"><img src="${s.img}" alt="${s.name}"></div>
      <div class="group">
        <div class="quoteMark">“</div>
        <div class="text">${s.quote}</div>
        <div class="meta"><strong>${s.name}</strong><br><span class="role">${s.role}</span></div>
        <div class="dots" data-dots="${i}">
          ${slides.map((_, k)=> `<button class="dot ${k===0?'active':''}" aria-label="Go to slide ${k+1}"></button>`).join('')}
        </div>
      </div>
    </section>
  `).join('');

  document.querySelectorAll('.dots .dot').forEach((btn, k)=>{
    btn.addEventListener('click', ()=> go(k, true));
  });

  go(0,false);
  start();
}

function updateDots(){
  // Clear active/playing everywhere
  document.querySelectorAll('.dots .dot').forEach(d=>{
    d.classList.remove('active','playing');
    d.style.animation = 'none';
  });

  // Set current index as active in ALL rows
  document.querySelectorAll('.dots').forEach(row=>{
    const dots = row.querySelectorAll('.dot');
    const active = dots[idx];
    if (!active) return;

    active.classList.add('active');
    active.classList.remove('playing');
    void active.offsetWidth;  // reflow to reset animation
    active.classList.add('playing');
  });
}

function go(i, user=false){
  idx = (i + slides.length) % slides.length;
  track.style.transform = `translateX(-${idx * 100}%)`;
  updateDots();
  if (user) restart();
}

function next(){ go(idx+1,false); }
function start(){ stop(); timer = setInterval(next, AUTOPLAY_MS); }
function stop(){ if (timer) clearInterval(timer); }
function restart(){ stop(); start(); }

//viewport.addEventListener('mouseenter', stop);
//viewport.addEventListener('mouseleave', start);

window.addEventListener('load', build);
</script>
</body>
</html>
